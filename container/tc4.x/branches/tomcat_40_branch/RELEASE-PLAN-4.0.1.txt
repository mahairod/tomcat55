$Id$

                     Release Plan for Apache Tomcat 4.0.1
                     ====================================


Introduction:
------------

This document is a release plan for a maintenance release of Tomcat 4.0. This 
release will address a few important issues which have been uncovered since 
the release of Tomcat 4.0, as well as a number of fixes for bugs and 
compliance issues. None of these problems are showstoppers, and justified an
emergency release.

The following schedule is proposed:

  Sunday, October 7, 2001       Tomcat 4.0.1 Beta

  Monday, October 15, 2001      Tomcat 4.0.1 Release

If for some reason new issues are found which need significant patches to be 
addressed, additional beta releases will be made, and this release plan will be
updated.

As usual with a mainenance release, there should be no regressions from 4.0 to
4.0.1, and no open confirmed P1 or P2 bugs in the Bugzilla database. The 
Apache bug database can be accessed at:

  http://nagoya.apache.org/bugzilla/

Please review the bug reports, and their classification as "must have",
"nice to have", or "address later".  Lobbying for changes in classification
can take place on the TOMCAT-DEV mailling list.  In addition, if you have a
bug report or enhancement that you wish to have considered prior to final
release, please submit a bug report as quickly as possible.



New Features
------------

- Support for AJP 1.3.
- Static resource content caching.


Enhancements
------------

- Enhanced error reporting mechanism.
- Enhance implementation of the filesystem access.


Important Bug Fixes
-------------------

- Fix class loading delegation problems (should fix most reported class 
  loading conflicts).
- Fix spec compliance issues where the response wouldn't be committed after
  a sendError or sendRedirect.
- Correctly produce error reports and handle error pages for 401, 403, as well
  as errors returned from a forwarded servlet.
- Fix consistency problems in the static resource cache.


Bugzilla Bugs Resolved
----------------------

2693    Syntax errors in JSP source generate NumberFormatException.
3640    Fix for JSPC handling of tag libraries in a JAR.
3669    Improve Jasper error reporting (stack traces).
3695    Do not add ldap.jar to class path on JDK 1.3 or later.
3699    A recursive function call in org.apache.naming.NamingContext.
3707    Custom action attribute of type Object does not accept literal string 
        value.
3708    Ldap.jar has a questionable license.
3709    Tyrex license is not being followed.
3718    NEW_SPECS.txt file in src directory could confuse the inexperienced.
3724    WebApps do not autodeploy if appBase changed under Windows.
3733    Session serialization problem.
3736    Incorrect PathInfo on first invocation of servlet chain.
3739    Custom tag support error.
3759    Conversion from String to Object doesn't work.
3780    Documentation notes.
3796    XML Classloader problem has crept back in.
3809    Jar files in the wrong directories.
3817    Classpath loading priority doesn't match docs.
3822    Drive letter causes a NumberFormatException when JSP compile.
3841    Incorrect state reported by EmbeddedManager.java:start().
3845    Body content is supposed to be empty.
3885    Server.xml ResourceParam does not match envCtx.lookup.
3889    Documentation for "Remote Address Filter" and "Remote Host Filter" 
        incorrect.
3892    Can't compile 2092.jsp.
3910    Web.xml mime type incorrect for jnlp.
3936    ClassLoader.getResources does not work.
3949    Document with content-length of 0 results in resend headers.


Bugs That Must Be Addressed Before Final Release:
------------------------------------------------

Connectors  3509    Apache 1.3.20 and mod_webapp and Tomcat 4b7 HANGS
                    (likely to be the same issue as 1788)

Connectors  3534    File Upload doesn't work with Apache, mod_webapp, Tomcat 4,
                    and WebDAV.

Jasper      3779    The value of <jsp:param> should be URL encoded.

Catalina    3888    WebappClassLoader: Lifecycle error : CL stopped (bug 
                    confirmed, but conditions to reproduce it still unclear).

Catalina    3993    j_security_check gives 403 error.


Nice To Have Fixes Before Final Release:
---------------------------------------

Jasper      3668    Validation error reporting.

Jasper      3704    Forward errors not reported when response is committed.

Jasper      3770    HttpSessionListener.sessionCreated() called twice for each
                    session.

Catalina    3990    JNDI/LDAP Realm password authentication process.


Unconfirmed Bugs (Awaiting Reproducible Failure Case):
-----------------------------------------------------

Catalina    3953    If context is listed in server.xml then webapp servlets 
                    are loaded twice.

Catalina    3970    Cannot send more that 1 MB using multipart/form-data.
