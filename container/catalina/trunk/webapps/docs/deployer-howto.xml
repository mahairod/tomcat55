<?xml version="1.0"?>
<!DOCTYPE document [
  <!ENTITY project SYSTEM "project.xml">
]>
<document url="deployer-howto.html">

    &project;

    <properties>
        <author email="remm@apache.org">Remy Maucherat</author>
        <title>Deployer HOW-TO</title>
    </properties>

<body>

<section name="Table of Contents">

<p>
<a href="#Introduction">Introduction</a><br />
<a href="#Context descriptors">Context XML descriptors</a><br />
<a href="#Deploying on Tomcat startup">Deploying on Tomcat startup</a><br />
<a href="#Deploying on a running Tomcat server">Deploying on running Tomcat server</a><br />
<a href="#Deploying using the Client Deployer Package">Deploying using the Client Deployer Package</a><br />
<blockquote>
</blockquote>
</p>

</section>

<section name="Introduction">

<p>The deployer, which as its name imply, allows deploying and undeploying web
applications to the Tomcat server, either statically (the application is 
setup before the server is started), or dynamically (in conjunction with the
Tomcat Manager web application or manipulating already deployed applications).
</p>

</section>

<section name="Context descriptors">

<p>A Context XML descriptor is a fragment of XML data which contains a valid
Context element which would normally be found in the main server configuration
file (conf/server.xml), and allows easy and automated manipulation 
of web applications by the various management tools available in Tomcat. 
For a given host, the Context descriptors are located in 
<code>$CATALINA_HOME/conf/[enginename]/[hostname]/foo.xml</code>. Note that 
while the name of the file is not tied to the webapp name, Tomcat will create
Context descriptors which match the webapp name whenever it will generate a
Context descriptor.
</p>

<p>Context descriptors allow defining all aspects and configuration parameters
of a Context, such as namign resources and session manager configuration.
It should be noted that the docBase specified in the Context element can 
refer to either the .WAR or the directory which will be created when the
.WAR is expanded or the .WAR itself.</p>

</section>

<section name="Deploying on Tomcat startup">

<p>The webapps which are present in the host appBase will be deployed if the
host "deployOnStartup" property is true. The deployment process is 
the following:
<ul>
    <li>The Context XML declarations will be deployed first</li>
    <li>Expanded web applications not referenced by Context XML declarations
        will then be deployed; if they have an associated .WAR file and it is
        newer than the expanded web application, the expanded directory will
        be removed and the webapp will be redeployed from the .WAR</li>
    <li>.WAR files will be deployed</li>
</ul>
For each deployed web application, a matching Context XML descriptor will be
created unless one exists already.
</p>

</section>

<section name="Deploying on a running Tomcat server">

<p>If the host "autoDeploy" property is true, the host will attempt to deploy 
and update web applications dynamically, as needed.</p>

</section>

<section name="Deploying using the Client Deployer Package">

<p>The client deployer is a package which can be used to validate, compile,
and deploy a web application to a production or development server. It should 
be noted that this feature uses the Tomcat manager for automatic deployment.
</p>

</section>

</body>

</document>
