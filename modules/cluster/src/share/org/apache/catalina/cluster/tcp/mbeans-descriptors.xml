<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mbeans-descriptors PUBLIC
   "-//Apache Software Foundation//DTD Model MBeans Configuration File"
   "http://jakarta.apache.org/commons/dtds/mbeans-descriptors.dtd">
<mbeans-descriptors>

  <mbean         name="SimpleTcpCluster"
           description="Tcp Cluster implementation"
               domain="Catalina"
                group="Cluster"
                 type="org.apache.catalina.cluster.tcp.SimpleTcpCluster">

    <attribute   name="notifyListenersOnReplication"
          description="notify session attribute listener at backups"
                 type="boolean"/>
    <attribute   name="clusterName"
          description="name of cluster"
                 type="java.lang.String"/>
    <attribute   name="managerClassName"
          description="session mananager classname"
                 type="java.lang.String"/>                 
    <attribute   name="nrOfMsgsReceived"
          description="number of messages received from other nodes"
                 type="long"
                 writeable="false"/>
    <attribute   name="msgSendTime"
          description="total time message received"
                 type="long"
                 writeable="false"/>
    <operation   name="send"
               description="send message to all cluster members"
               impact="ACTION"
               returnType="void">
      <parameter name="message"
                 description="replication message"
                 type="org.apache.catalina.cluster.ClusterMessage"/>
    </operation>
        
    <operation   name="send"
               description="send message to one cluster member"
               impact="ACTION"
               returnType="void">
      <parameter name="message"
                 description="replication message"
                 type="org.apache.catalina..cluster.ClusterMessage"/>
      <parameter name="member"
                 description="cluster member"
                 type="org.apache.catalina.cluster.Member"/>
    </operation>

    <operation   name="start"
               description="Start the cluster"
               impact="ACTION"
               returnType="void">
    </operation>
    
    <operation name="stop"
               description="Stop the cluster"
               impact="ACTION"
               returnType="void">
    </operation>
                 
  </mbean>

  <mbean         name="ReplicationTransmitter"
          description="Tcp replicatio transmitter"
               domain="Catalina"
                group="ClusterSender"
                 type="org.apache.catalina.cluster.tcp.ReplicationTransmitter">

    <attribute   name="replicationMode"
          description="replication mode (synchnous,pooled.asynchnous)"
                 type="java.lang.String"/>
    <attribute   name="ackTimeout"
          description="acknowledge timeout"
                 type="long"/>
    <attribute   name="autoConnect"
          description="is sender disabled, fork a new one"
			     is="true"
                 type="boolean" />
    <attribute   name="waitForAck"
          description="Wait for ack after data send"
			     is="true"
                 type="boolean"
                 writeable="false" />
    <attribute   name="nrOfRequests"
          description="number of send messages to other members"
                 type="long"
                 writeable="false"/>
    <attribute   name="totalBytes"
          description="number of bytes transfered"
                 type="long"
                 writeable="false"/>
    <attribute   name="failureCounter"
          description="number of wrong transfers"
                 type="long"
                 writeable="false"/>
    <operation   name="start"
               description="Start the cluster"
               impact="ACTION"
               returnType="void">
    </operation>    
    <operation name="stop"
               description="Stop the cluster"
               impact="ACTION"
               returnType="void">
    </operation>
	<operation name="resetStatistics"
               description="Reset all statistics"
               impact="ACTION"
               returnType="void">
    </operation>	
  </mbean>

  <mbean         name="AsyncSocketSender"
          description="Async Cluster Sender"
               domain="Catalina"
                group="IDataSender"
                 type="org.apache.catalina.cluster.tcp.AsyncSocketSender">
    <attribute   name="info"
          description="Class version info"
                 type="java.lang.String"
                 writeable="false"/>
    <attribute   name="address"
          description="sender ip address"
                 type="java.net.InetAddress"
                 writeable="false"/>
    <attribute   name="port"
          description="sender port"
                 type="int"
                 writeable="false" />
    <attribute   name="suspect"
          description="Socket is gone"
                 type="boolean"/>
    <attribute   name="waitForAck"
          description="Wait for ack after data send"
			     is="true"
                 type="boolean"
                 writeable="false" />
    <attribute   name="ackTimeout"
          description="acknowledge timeout"
                 type="long"/>
    <attribute   name="queueSize"
                 writeable="false"
          description="queue size"
                 type="int"/>
    <attribute   name="queuedNrOfBytes"
                 writeable="false"
          description="number of bytes over all queued messages"
                 type="long"/>
    <attribute   name="keepAliveTimeout"
          description="active socket keep alive timeout"
                 type="long"/>
    <attribute   name="keepAliveMaxRequestCount"
          description="max request over this socket"
                 type="int"/>
    <attribute   name="keepAliveCount"
          description="keep Alive request count"
                 type="int"
                 writeable="false"/>
    <attribute   name="keepAliveConnectTime"
          description="Connect time for keep alive"
                 type="long"
                 writeable="false"/>
    <attribute   name="connected"
                 is="true"
          description="socket connected"
                 type="boolean"
                 writeable="false"/>
    <attribute   name="nrOfRequests"
          description="number of send messages to other members"
                 type="long"
                 writeable="false"/>
    <attribute   name="totalBytes"
          description="number of bytes transfered"
                 type="long"
                 writeable="false"/>
    <attribute   name="connectCounter"
          description="counts connects"
                 type="long"
                 writeable="false"/>
    <attribute   name="disconnectCounter"
          description="counts disconnects"
                 type="long"
                 writeable="false"/>
    <attribute   name="socketOpenCounter"
          description="counts open socket (KeepAlive and connects)"
                 type="long"
                 writeable="false"/>				 
    <attribute   name="socketCloseCounter"
          description="counts closed socket (KeepAlive and disconnects)"
                 type="long"
                 writeable="false"/>
    <attribute   name="missingAckCounter"
          description="counts missing ack"
                 type="long"
                 writeable="false"/>
    <attribute   name="dataResendCounter"
          description="counts data resends"
                 type="long"
                 writeable="false"/>
    <attribute   name="inQueueCounter"
          description="counts all queued messages"
                 type="long"
                 writeable="false"/>
    <attribute   name="outQueueCounter"
          description="counts all successfully sended messages"
                 type="long"
                 writeable="false"/>
	<operation name="connect"
               description="connect to other replication node"
               impact="ACTION"
               returnType="void">
    </operation>
	<operation name="disconnect"
               description="disconnect to other replication node"
               impact="ACTION"
               returnType="void">
    </operation>
	<operation name="checkIfCloseSocket"
               description="Check connection for close socket"
               impact="ACTION"
               returnType="boolean">
    </operation>
	<operation name="resetStatistics"
               description="Reset all statistics"
               impact="ACTION"
               returnType="void">
    </operation>
				 
  </mbean>

  <mbean         name="PooledSocketSender"
          description="Pooled Cluster Sender"
               domain="Catalina"
                group="IDataSender"
                 type="org.apache.catalina.cluster.tcp.PooledSocketSender">
    <attribute   name="address"
          description="sender ip address"
                 type="java.net.InetAddress"
                 writeable="false"/>
    <attribute   name="port"
          description="sender port"
                 type="int"
                 writeable="false" />
    <attribute   name="suspect"
          description="Socket is gone"
                 type="boolean"/>
    <attribute   name="ackTimeout"
          description="acknowledge timeout"
                 type="long"/>
    <attribute   name="waitForAck"
          description="Wait for ack after data send"
			     is="true"
                 type="boolean"
                 writeable="false" />
    <attribute   name="maxPoolSocketLimit"
          description="Max parallel sockets"
                 type="int"/>
    <attribute   name="keepAliveTimeout"
          description="active socket keep alive timeout"
                 type="long"/>
    <attribute   name="keepAliveMaxRequestCount"
          description="max request over this socket"
                 type="int"/>
    <attribute   name="connected"
                 is="true"
          description="socket connected"
                 type="boolean"
                 writeable="false"/>
    <attribute   name="nrOfRequests"
          description="number of send messages to other members"
                 type="long"
                 writeable="false"/>
    <attribute   name="totalBytes"
          description="number of bytes transfered"
                 type="long"
                 writeable="false"/>
    <attribute   name="connectCounter"
          description="counts connects"
                 type="long"
                 writeable="false"/>
    <attribute   name="disconnectCounter"
          description="counts disconnects"
                 type="long"
                 writeable="false"/>
	<operation name="connect"
               description="start Queue to connect to ohter replication node"
               impact="ACTION"
               returnType="void">
    </operation>
	<operation name="disconnect"
               description="stop Queue to other replication node"
               impact="ACTION"
               returnType="void">
    </operation>
	<operation name="resetStatistics"
               description="Reset all statistics"
               impact="ACTION"
               returnType="void">
    </operation>
				 
  </mbean>

  <mbean         name="SocketSender"
          description="Sync Cluster Sender"
               domain="Catalina"
                group="IDataSender"
                 type="org.apache.catalina.cluster.tcp.SocketSender">
    <attribute   name="address"
          description="sender ip address"
                 type="java.net.InetAddress"
                 writeable="false"/>
    <attribute   name="port"
          description="sender port"
                 type="int"
                 writeable="false" />
    <attribute   name="suspect"
          description="Socket is gone"
                 type="boolean"/>
    <attribute   name="ackTimeout"
          description="acknowledge timeout"
                 type="long"/>
    <attribute   name="waitForAck"
          description="Wait for ack after data send"
			     is="true"
                 type="boolean"
                 writeable="false" />
    <attribute   name="maxPoolSocketLimit"
          description="Max parallel sockets"
                 type="int"/>
    <attribute   name="keepAliveTimeout"
          description="active socket keep alive timeout"
                 type="long"/>
    <attribute   name="keepAliveMaxRequestCount"
          description="max request over this socket"
                 type="int"/>
    <attribute   name="keepAliveCount"
          description="keep Alive request count"
                 type="int"
                 writeable="false"/>
    <attribute   name="keepAliveConnectTime"
          description="Connect time for keep alive"
                 type="long"
                 writeable="false"/>
    <attribute   name="connected"
                 is="true"
          description="socket connected"
                 type="boolean"
                 writeable="false"/>
    <attribute   name="nrOfRequests"
          description="number of send messages to other members"
                 type="long"
                 writeable="false"/>
    <attribute   name="totalBytes"
          description="number of bytes transfered"
                 type="long"
                 writeable="false"/>
    <attribute   name="connectCounter"
          description="counts connects"
                 type="long"
                 writeable="false"/>
    <attribute   name="disconnectCounter"
          description="counts disconnects"
                 type="long"
                 writeable="false"/>
    <attribute   name="socketCloseCounter"
          description="counts closed socket (KeepAlive and disconnects)"
                 type="long"
                 writeable="false"/>
    <attribute   name="socketOpenCounter"
          description="counts open socket (KeepAlive and connects)"
                 type="long"
                 writeable="false"/>				 
    <attribute   name="missingAckCounter"
          description="counts missing ack"
                 type="long"
                 writeable="false"/>
    <attribute   name="dataResendCounter"
          description="counts data resends"
                 type="long"
                 writeable="false"/>
	<operation name="connect"
               description="connect to other replication node"
               impact="ACTION"
               returnType="void">
    </operation>
	<operation name="disconnect"
               description="disconnect to other replication node"
               impact="ACTION"
               returnType="void">
    </operation>
	<operation name="checkIfCloseSocket"
               description="Check connection for close socket"
               impact="ACTION"
               returnType="boolean">
    </operation>
	<operation name="resetStatistics"
               description="Reset all statistics"
               impact="ACTION"
               returnType="void">
    </operation>
				 
  </mbean>
    
  <mbean         name="ReplicationValve"
          description="Valve for simple tcp replication"
               domain="Catalina"
                group="Valve"
                 type="org.apache.catalina.cluster.tcp.ReplicationValve">
    <attribute   name="filter"
          description="resource filter to disable session replication check"
                 type="java.lang.String"/>
    <attribute   name="primaryIndicator"
          description="set indicator that request processing is at primary session node"
                 type="boolean"/>
    <attribute   name="primaryIndicatorName"
          description="Request attribute name to indicate that request processing is at primary session node"
                 type="java.lang.String"/>
	<attribute   name="nrOfRequests"
          description="number of replicated requests"
                 type="long"
                 writeable="false"/>
    <attribute   name="totalRequestTime"
          description="total replicated request time"
                 type="long"
                 writeable="false"/>
    <attribute   name="totalSendTime"
          description="total replicated send time"
                 type="long"
                 writeable="false"/>
    <attribute   name="lastSendTime"
          description="last replicated request time"
                 type="long"
                 writeable="false"/>
  </mbean>


</mbeans-descriptors>
