## configure should make the Makefile out of this file.

APXS=@APXS@
OS=@OS@
JAVA_HOME=@JAVA_HOME@

JK=../common
JK_INCL=-DUSE_APACHE_MD5 -I ${JK}
JAVA_INCL=-I ${JAVA_HOME}/include -I ${JAVA_HOME}/include/${OS}
JAVA_LIB=-L ${JAVA_HOME}/jre/lib/${ARCH} -L ${JAVA_HOME}/lib/${ARCH}/native_threads

SRCS=${JK}/jk_ajp12_worker.c ${JK}/jk_connect.c ${JK}/jk_msg_buff.c ${JK}/jk_util.c ${JK}/jk_ajp13.c \
     ${JK}/jk_jni_worker.c ${JK}/jk_pool.c ${JK}/jk_worker.c ${JK}/jk_ajp13_worker.c ${JK}/jk_lb_worker.c \
     ${JK}/jk_sockbuf.c  ${JK}/jk_map.c ${JK}/jk_uri_worker_map.c ${JK}/jk_ajp14.c ${JK}/jk_ajp14_worker.c \
     ${JK}/jk_md5.c

all: mod_jk.so

mod_jk.so: 
	$(APXS) ${JK_INCL} ${JAVA_INCL} -c -o $@ mod_jk.c $(SRCS) 

clean:
	rm *.o *.so
