<?xml version="1.0"?>
<!DOCTYPE document [
  <!ENTITY project SYSTEM "project.xml">
]>
<document url="iis.html">

    &project; 

    <properties>
        <author email="mturk@apache.org">Mladen Turk</author>
        <title>Installation for IIS</title>
    </properties>

<body>

<section name="Building ISAPI redirector">
<p>
The redirector was developed using Visual C++ Ver.6.0, so having this environment is a prereq if you want 
to perform a custom build. You should also have Platform SDK from January 2003 or later or
at least IIS developer SDK.
</p>
<p>
The easiest way to build the isapi redirector is to use Microsoft Visual Studio
and open the <b>jk/native/iis/isapi.dsp</b> file.
</p>
<p>It is recommended that you use <b>Visual Studio 2003</b>
or later for building isapi redirector, to be able to use the TRACE logging
features.
</p>
<p>If using Visual Studio 6.0 then it is recommended that you download
Visual Studio Service Pack 5 or any later version.
</p>
<p>
The steps that you need to take are if wish to build from command line:
<ul>
<li>
Change directory to the isapi plugins source directory.
</li>
<li>
Make the source with MSDEV
</li>
</ul>
<screen>
<note>Change directory to the isapi plugins source directory</note>
<typedos>cd c:\jakarta-tomcat-connectors\jk\native\iis</typedos>
<note>Build the sources using MSDEV</note>
<typedos>MSDEV isapi.dsp /MAKE ALL</typedos>
</screen>
</p>
<p>
If msdev is not in your path, enter the full path to msdev.exe. 
This will build both release and debug versions of the redirector plugin.
An alternative will be to open the isapi workspace file (isapi.dsw) in msdev and 
build it using the build menu.
</p>
<p>
You can also use the free Microsoft tools for building mod_jk. You will need to download the
<a href="http://www.microsoft.com/msdownload/platformsdk/sdkupdate/">Platform SDK</a> and
<a href="http://msdn.microsoft.com/visualc/vctoolkit2003/">Microsoft Visual C++ Toolkit 2003</a>
Copy the <b>nmake.exe</b> from PlatformSDK\bin\Win64 to PlatformSDK\bin.
<screen>
<note>Change directory to the isapi plugins source directory</note>
<typedos>C:\Vctoolkit\vcvars32.bat</typedos><br/>
<typedos>C:\PlatformSDK\vcvars32.bat</typedos><br/>
<typedos>nmake -f Makefile.vc</typedos><br/>
</screen>
</p>

</section>

</body>
</document>