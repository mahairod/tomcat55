<project name="jakarta-check" default="core" basedir=".">

  <!-- system properties can be defined here, compiler can have the values:
       classic, modern, jikes -->

   <property name="build.compiler" value="classic"/>

   <property name="dest" value="../build/jakarta-check"/>

   <target name="core">

      <mkdir dir="${dest}"/>
      <mkdir dir="${dest}/clients"/>
      <mkdir dir="${dest}/conf" />
      <mkdir dir="${dest}/props" />  <!-- what is this for?? - akv -->

      <mkdir dir="${dest}/webapps/servlet-tests/WEB-INF/classes"/>
      <mkdir dir="${dest}/webapps/jsp-tests"/>

      <copydir src="src/server/servlet-tests" dest="${dest}/webapps/servlet-tests"/>
      <copydir src="src/server/jsp-tests" dest="${dest}/webapps/jsp-tests"/>

      <javac srcdir="src/server/servlet-tests/WEB-INF/classes"
             destdir="${dest}/webapps/servlet-tests/WEB-INF/classes"/>

      <javac srcdir="src/server/jsp-tests/WEB-INF/classes"
             destdir="${dest}/webapps/jsp-tests/WEB-INF/classes"/>

      <copydir src="src/bin" dest="${dest}"/>
      <copydir src="src/conf" dest="${dest}/conf" />
      <copydir src="src/props" dest="${dest}/props"/>
     
      <javac srcdir="src/clients" destdir="${dest}/clients" />    

     <!-- Need to copy moo - the deployment file must be self-contained, with no 
          external dependencies -->
 
     <!-- I find this ugly as I'm sure a lot of other people do but I don't have a
          better solution. I agree the deployment file should be self-contained. 
                                                                    - akv
      -->
     
      <javac srcdir="../jakarta-tools/moo/src/share" 
             destdir="${dest}/webapps/servlet-tests/WEB-INF/classes" />

      <javac srcdir="../jakarta-tools/moo/src/share" 
             destdir="${dest}/webapps/jsp-tests/WEB-INF/classes" />

     <!-- Build moo in the client directory too, avoid separate moo.jar problems -->

      <javac srcdir="../jakarta-tools/moo/src/share" 
             destdir="${dest}/clients" />
   </target>

   <target name="clean">
      <deltree dir="${dest}"/>
   </target>

</project>